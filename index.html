<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="None">
        
        
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>HPC Cost Simulator</title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="js/jquery-1.10.2.min.js" defer></script>
        <script src="js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/python.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body class="homepage">
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <a class="navbar-brand" href=".">HPC Cost Simulator</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem active">
                                <a href="." class="nav-link">HPC Cost Simulator (HCS)</a>
                            </li>
                            <li class="navitem">
                                <a href="AcceleratorLogParser/" class="nav-link">Altair Accelerator</a>
                            </li>
                            <li class="navitem">
                                <a href="LSFLogParser/" class="nav-link">IBM Spectrum LSF</a>
                            </li>
                            <li class="navitem">
                                <a href="SlurmLogParser/" class="nav-link">Slurm</a>
                            </li>
                            <li class="navitem">
                                <a href="JobAnalyzer/" class="nav-link">Job Analyzer</a>
                            </li>
                            <li class="navitem">
                                <a href="Output/" class="nav-link">Output</a>
                            </li>
                            <li class="navitem">
                                <a href="config/" class="nav-link">Config</a>
                            </li>
                            <li class="navitem">
                                <a href="model-scheduling/" class="nav-link">Model How Jobs Would Be Scheduled on AWS</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" class="nav-link disabled">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="AcceleratorLogParser/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/aws-samples/hpc-cost-simulator/edit/master/docs/index.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#hpc-cost-simulator-hcs" class="nav-link">HPC Cost Simulator (HCS)</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#data-privacy" class="nav-link">Data privacy</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#how-data-is-analyzed" class="nav-link">How data is analyzed</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#prerequisites" class="nav-link">Prerequisites</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#configuration" class="nav-link">Configuration</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#instance-type-information" class="nav-link">Instance Type Information</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#running-the-tool" class="nav-link">Running the Tool</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#steps-1-2" class="nav-link">Steps 1 &amp; 2</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#step-3" class="nav-link">Step 3</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#step-4" class="nav-link">Step 4</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="hpc-cost-simulator-hcs">HPC Cost Simulator (HCS)</h1>
<p>HPC Cost Simulator (HCS) enables customers to simulate their High Performance Computing (HPC) costs on AWS.
To simulate your future costs, HCS analyzes past job records (scheduler accounting database) and performs hour-by-hour cost analysis.</p>
<p>Supported schedulers:</p>
<ul>
<li>IBM LSF</li>
<li>SchedMD Slurm</li>
<li>Altair Accelerator</li>
</ul>
<p>The output allows customers to:</p>
<ol>
<li>Estimate their Amazon Elastic Compute Cloud (Amazon EC2) costs hour-by-hour</li>
<li>Choose the optimal consumption model to minimize costs, including <a href="https://aws.amazon.com/savingsplans/">Savings Plans</a>, <a href="https://aws.amazon.com/ec2/pricing/reserved-instances/">Reserved Instances</a> and <a href="https://aws.amazon.com/ec2/spot/">Spot Instances</a></li>
<li>Get statistics about their workloads, locating specific job configurations that are waiting in queue longer, reducing engineering productivity.</li>
</ol>
<h2 id="data-privacy">Data privacy</h2>
<p>HCS avoids the need to share scheduler logs with AWS. Scheduler logs include business sensitive data (tape out dates, project names) and PII (user names).
Instead, customers run HCS on premises, creating an anonymized output that may be shared with your AWS account team to get additional cost optimization guidance.</p>
<p>The output file (located under the <code>output/</code> directory if not otherwise specified) is a simple Excel (.xslx), allowing you to audit its contents before sharing it.</p>
<h2 id="how-data-is-analyzed">How data is analyzed</h2>
<p>The analysis is a 4-step process:</p>
<table>
<thead>
<tr>
<th>#</th>
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Data Collection</td>
<td>Collect accounting records from the database.</td>
</tr>
<tr>
<td>2</td>
<td>Formatting</td>
<td>Parsing the scheduler accounting database - this takes the scheduler specific format, and converts the job records to a uniform format (not scheduler specific).</td>
</tr>
<tr>
<td>3</td>
<td>Cost Simulation</td>
<td>Performing cost simulation using the output from step 2.</td>
</tr>
<tr>
<td>4</td>
<td>Analysis</td>
<td>Analyzing the output, building a complete cost model. This can be done using your AWS account team.</td>
</tr>
</tbody>
</table>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>Python 3.6 or newer</li>
<li>sudo access to install any required tools</li>
<li>Recommended: CentOS 7 or higher</li>
</ul>
<p>A bash setup script is provided to install the required packages and create a Python virtual environment. The pip packages and versions are listed in <a href="https://github.com/aws-samples/hpc-cost-simulator/blob/main/requirements.txt">requirements.txt</a>.
The setup script must be sourced, not executed, to set up the environment to run the tool.</p>
<pre><code>source setup.sh
</code></pre>
<h2 id="configuration">Configuration</h2>
<p>HCS comes pre-configured with a few best practices for analyzing an Electronics Design Automation (EDA) workload. You can edit the configuration by editing <code>config.yml</code> before running HCS. We encourage you to read the file before running to tool, to know what parameters are used to simulate the workload.</p>
<p>A <strong>partial</strong> list of these configuration parameters includes:</p>
<ul>
<li>AWS region</li>
<li>Instance selection guidelines</li>
<li>Savings Plans selection guidelines</li>
<li>Spot selection guidelines</li>
</ul>
<h2 id="instance-type-information">Instance Type Information</h2>
<p>To perform cost simulation, HCS requires a list of available instance types in the region and their prices that is stored in <a href="https://github.com/aws-samples/hpc-cost-simulator/blob/main/instance_type_info.json">instance_type_info.json</a>.
HCS comes pre-populated with the database, and we periodically update it to reflect new instance types, prices etc.
However, to update it yourself , see <a href="UpdateInstanceDatabase/">Updating Instance Type Information</a></p>
<h1 id="running-the-tool">Running the Tool</h1>
<h2 id="steps-1-2">Steps 1 &amp; 2</h2>
<p>These steps are scheduler-specific and are explained in each scheduler's documentation page:</p>
<ul>
<li><a href="LSFLogParser/">IBM LSF</a></li>
<li><a href="SlurmLogParser/">SchedMD Slurm</a></li>
<li><a href="AcceleratorLogParser/">Altair Engineering Accelerator</a></li>
</ul>
<p>If you want to parse data from an unsupported scheduler, you can export the accounting data from that scheduler generating your own CSV, as long as you CSV structure defined in <a href="UnderstandingCSVformat/">Understanding the CSV format</a></p>
<h2 id="step-3">Step 3</h2>
<p>Once completed, you can run step #3 (cost simulation) by following the instructions in for the <a href="JobAnalyzer/">JobAnalyzer</a></p>
<p><strong>Notes for step #3</strong></p>
<ol>
<li>The job analyzer can call the parser (step 2), however, parsing is the longest step so it is recommended that you run it separately.</li>
<li>The job analyzer can be run with different configuration file (<code>config.yml</code>) on the same job data.
For example:</li>
<li>Simulating your workload costs with and without Spot Instances</li>
<li>Simulating your costs with different instance families</li>
</ol>
<h2 id="step-4">Step 4</h2>
<p>For analysis, you can either share the Excel file from step #3 with your AWS account team, or read the <a href="Output/">Output</a> page for more details.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = ".",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="js/base.js" defer></script>
        <script src="search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>

<!--
MkDocs version : 1.4.2
Build Date UTC : 2023-02-09 17:25:58.026774+00:00
-->
